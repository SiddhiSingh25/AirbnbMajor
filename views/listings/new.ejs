<%- layout('layouts/boilerplate') %>

    <body>
        <div class="bg-white md:p-16 p-8 rounded-xl shadow-xl w-full max-w-5xl mx-auto mt-10">
            <h1 class="text-4xl font-semibold text-gray-800 mb-8 text-center">Add a New Listing</h1>

            <!-- Form with Bootstrap Validation -->
            <form class="needs-validation space-y-6" enctype="multipart/form-data" action="/listings" method="post" novalidate>
                <div>
                    <label for="title" class="block text-gray-700 font-medium text-2xl">Title</label>
                    <input type="text" name="listing[title]" id="title" required
                        class=" form-control w-full mt-2 px-5 py-3 text-xl border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="invalid-feedback text-red-500">Title is required.</div>
                </div>

                <div>
                    <label for="description" class="block text-gray-700 font-medium text-2xl">Description</label>
                    <input type="text" name="listing[description]" id="description" required
                        class=" form-control w-full mt-2 px-5 py-3 text-xl border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="invalid-feedback text-red-500">Description is required.</div>
                </div>

                <div>
                    <label for="image" class="block text-gray-700 font-medium text-2xl">Image URL</label>
                    <input type="file" name="listing[image]" id="image" required 
                        class=" form-control w-full mt-2 px-5 py-3 text-xl border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="invalid-feedback text-red-500">image is required.</div>
                </div>

                <div class="flex items-center justify-between w-full gap-2">
                    <div class="w-[50%]">
                        <label for="price" class="block text-gray-700 font-medium text-2xl">Price</label>
                        <input type="text" name="listing[price]" id="price" required
                               class="form-control w-full mt-2 px-5 py-3 text-xl border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <div id="error-message" class="text-red-500 hidden">Please enter a valid number.</div>
                    </div>

                    <div class="w-[50%]">
                        <label class="block text-gray-700 text-2xl font-medium mb-2">Category</label>
                        <select name="listing[category]"
                            class="form-control w-full mt-2 px-5 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-xl"
                            required>
                            <option value="">Select a Category</option>
                            <option value="Homes">Homes</option>
                            <option value="Farms">Farms</option>
                            <option value="OMG!">OMG!</option>
                            <option value="Barns">Barns</option>
                            <option value="Caves">Caves</option>
                            <option value="Island">Island</option>
                            <option value="Bed & breakfasts">Bed & breakfasts</option>
                            <option value="National parks">National parks</option>
                            <option value="Lakefront">Lakefront</option>
                            <option value="Amazing pools">Amazing pools</option>
                            <option value="Beachfront">Beachfront</option>
                            <option value="Chef kitchens">Chef kitchens</option>
                            <option value="Camping">Camping</option>
                            <option value="Treehouses">Treehouses</option>
                            <option value="Cabins">Cabins</option>
                            <option value="Historical homes">Historical homes</option>
                            <option value="Trending">Trending</option>
                        </select>
                        <div id="error-message" class="text-red-500 hidden">Category is required</div>
                    </div>
                    
                </div>

                

                <div class="flex items-center justify-between w-full gap-2">
                    <div class="w-[50%]">
                        <label class="block text-gray-700 text-2xl font-medium mb-2">Location</label>
                        <input type="text" name="listing[location]"
                            class=" form-control w-full mt-2 px-5 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-xl"
                            required>
                            <div id="error-message" class="text-red-500 hidden">Please enter a valid location.</div>
                    </div>

                    <div class="w-[50%]">
                        <label class="block text-gray-700 text-2xl font-medium mb-2">Country</label>
                        <input type="text" name="listing[country]"
                            class=" form-control w-full mt-2 px-5 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-xl"
                            required>
                            <div id="error-message" class="text-red-500 hidden">Country is required</div>
                    </div>
                </div>

                <div class="text-center mt-8">
                    <button type="submit"
                        class="w-full bg-[#ff385c] text-white py-3 rounded-xl hover:bg-[#ff4164] transition-colors duration-300 cursor-pointer text-2xl font-semibold">Add</button>
                </div>
            </form>
        </div>
        <script src="/js/script.js"></script>
        <script>
            const priceInput = document.getElementById("price");
            const errorMessage = document.getElementById("error-message");
        
            priceInput.addEventListener("input", () => {
                // Check if the input value is a number
                if (isNaN(priceInput.value) || priceInput.value.trim() === "") {
                    errorMessage.classList.remove("hidden"); // Show error message
                    errorMessage.textContent = "Please enter a valid number.";
                    priceInput.classList.add("border-red-500"); // Add error styling
                    priceInput.classList.remove("border-gray-300");
                } else {
                    errorMessage.classList.add("hidden"); // Hide error message
                    priceInput.classList.remove("border-red-500");
                    priceInput.classList.add("border-gray-300");
                }
            });
        </script>
    </body>